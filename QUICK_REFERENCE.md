# SAFMC FMP Tracker - Quick Reference

## ğŸš€ One-Command Deploy

```bash
# Initialize git, create GitHub repo, and deploy
git init && \
git add . && \
git commit -m "Initial commit" && \
gh repo create safmc-fmp-tracker --public --source=. --push
```

Then go to [Render Dashboard](https://dashboard.render.com/) â†’ New â†’ Blueprint â†’ Select your repo.

---

## ğŸ”‘ Environment Variables (for Render)

```
CLAUDE_API_KEY=your-claude-api-key-here
CLAUDE_MODEL=claude-sonnet-4.5-20250929
FLASK_ENV=production
ENABLE_SCHEDULER=true
SECRET_KEY=(auto-generated by Render)
DATABASE_URL=(auto-configured by Render)
```

---

## ğŸ’» Local Development

```bash
# Setup
python -m venv venv
source venv/bin/activate
pip install -r requirements.txt
createdb safmc_fmp_tracker

# Initialize database
python init_db.py

# Run
python app.py
```

Visit: http://localhost:5000

---

## ğŸŒ Important Endpoints

### Web Interface
- Dashboard: `/`
- Health Check: `/health`

### API - Core
- `GET /api/dashboard/stats` - Dashboard statistics
- `GET /api/actions` - All FMP actions
- `GET /api/meetings` - All meetings
- `GET /api/comments` - All comments
- `GET /api/comments/analytics` - Comment analytics

### API - AI Features
- `POST /api/ai/query` - Ask AI questions
  ```json
  {"question": "What is the status of Snapper Grouper amendments?"}
  ```

- `POST /api/ai/analyze` - Get pattern analysis
- `POST /api/ai/report` - Generate status report
- `POST /api/ai/search` - Search content
  ```json
  {"search_terms": "bag limits dolphin"}
  ```

### API - Scraping
- `POST /api/scrape/all` - Scrape all data
- `POST /api/scrape/amendments` - Scrape amendments only
- `POST /api/scrape/meetings` - Scrape meetings only
- `POST /api/scrape/comments` - Scrape comments only

### API - Monitoring
- `GET /api/logs/scrape` - View scraping logs

---

## ğŸ“¦ What's Included

### Backend
- Python/Flask 3.0 web server
- PostgreSQL database with 5 tables
- Claude AI integration (Sonnet 4.5)
- Automated web scraping (daily at 2 AM)
- 15+ REST API endpoints
- Background job scheduler

### Frontend
- Responsive dashboard
- AI assistant panel
- Multi-tab interface
- Real-time statistics
- Progress visualizations

### Features
- FMP action/amendment tracking
- Meeting calendar
- Public comment analytics
- Pattern analysis
- Natural language queries
- Automated data collection

---

## ğŸ”§ Quick Commands

```bash
# Test health
curl http://localhost:5000/health

# Get dashboard stats
curl http://localhost:5000/api/dashboard/stats

# Trigger scraping
curl -X POST http://localhost:5000/api/scrape/all

# Ask AI a question
curl -X POST http://localhost:5000/api/ai/query \
  -H "Content-Type: application/json" \
  -d '{"question": "What actions are in review?"}'

# Get comment analytics
curl http://localhost:5000/api/comments/analytics
```

---

## ğŸ“‚ File Structure

```
safmc-fmp-tracker/
â”œâ”€â”€ app.py                 # Main application
â”œâ”€â”€ requirements.txt       # Dependencies
â”œâ”€â”€ render.yaml           # Deployment config
â”œâ”€â”€ .env                  # Environment (configured)
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ models/           # Database models (5 files)
â”‚   â”œâ”€â”€ routes/           # API routes (2 files)
â”‚   â”œâ”€â”€ scrapers/         # Web scrapers (3 files)
â”‚   â”œâ”€â”€ services/         # AI + scheduler (2 files)
â”‚   â””â”€â”€ config/           # Extensions (1 file)
â””â”€â”€ public/
    â”œâ”€â”€ index.html        # Dashboard
    â”œâ”€â”€ js/app.js        # Frontend logic
    â””â”€â”€ css/styles.css   # Styling
```

---

## ğŸ¯ First-Time Setup After Deploy

1. **Verify deployment**
   ```bash
   curl https://your-app.onrender.com/health
   ```

2. **Load initial data**
   ```bash
   curl -X POST https://your-app.onrender.com/api/scrape/all
   ```

3. **Test AI**
   ```bash
   curl -X POST https://your-app.onrender.com/api/ai/query \
     -H "Content-Type: application/json" \
     -d '{"question": "List current FMP actions"}'
   ```

4. **Open dashboard**
   - Visit: https://your-app.onrender.com
   - Use AI panel on the right
   - Click "Update Data" button to refresh

---

## ğŸ“Š Database Tables

1. **actions** - FMP actions/amendments (action_id, title, fmp, progress_stage, progress_percentage)
2. **meetings** - SAFMC meetings (meeting_id, title, start_date, location, type)
3. **comments** - Public comments (comment_id, name, organization, position, commenter_type)
4. **milestones** - Action milestones (milestone_id, action_id, name, status, due_date)
5. **scrape_logs** - Scraping logs (log_id, scrape_type, status, items_scraped)

---

## ğŸ› Troubleshooting

### "Database connection failed"
- Check Render PostgreSQL database is running
- Verify DATABASE_URL environment variable

### "AI queries not working"
- Verify CLAUDE_API_KEY is set
- Check Render service logs
- Test API key: see DEPLOYMENT_CHECKLIST.md

### "No data showing"
- Trigger manual scrape: POST /api/scrape/all
- Check scrape logs: GET /api/logs/scrape

### "Service won't start"
- Check Render build logs
- Verify requirements.txt dependencies
- Check for Python syntax errors

---

## ğŸ“š Documentation Files

- **README.md** - Complete project overview
- **QUICKSTART.md** - 3-step setup guide
- **DEPLOYMENT.md** - Detailed deployment instructions
- **DEPLOYMENT_CHECKLIST.md** - Step-by-step checklist
- **ADVANCED_FEATURES.md** - AI and analytics documentation
- **STATUS.md** - Current project status
- **QUICK_REFERENCE.md** - This file

---

## ğŸ”— Key Links

- Render Dashboard: https://dashboard.render.com/
- Claude API Console: https://console.anthropic.com/
- SAFMC Website: https://safmc.net
- GitHub (after setup): https://github.com/yourusername/safmc-fmp-tracker

---

## âš¡ Quick Tests

After deployment, test these:

âœ… Health check returns "healthy"
âœ… Dashboard loads and displays UI
âœ… AI panel responds to "What FMP actions exist?"
âœ… "Update Data" button triggers scraping
âœ… Statistics show after data load
âœ… All tabs work (Dashboard, Actions, Meetings, Comments)

---

## ğŸ‰ You're Ready!

Your SAFMC FMP Tracker is configured and ready to deploy.

**Next step:** Choose your deployment method from DEPLOYMENT_CHECKLIST.md

- Option A: Deploy to Render (recommended)
- Option B: Test locally first

Both options are fully documented and ready to go!
